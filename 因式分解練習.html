<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>因式分解練習小遊戲</title>
<style>
  body { font-family: Arial; text-align: center; margin-top: 50px; }
  input { padding: 5px; font-size: 16px; }
  button { padding: 5px 10px; font-size: 16px; margin-left: 5px; }
  #result { margin-top: 20px; font-size: 18px; }
  #score, #timer { margin-top: 10px; font-size: 16px; }
</style>
</head>
<body>

<h2>因式分解練習小遊戲</h2>
<p id="question"></p>
<input type="text" id="answer" placeholder="輸入因式，如：(4x+3)(2x-5)">
<button onclick="checkAnswer()">檢查</button>
<button onclick="newQuestion()">下一題</button>

<div id="result"></div>
<div id="score">得分：0</div>
<div id="timer">剩餘時間：30 秒</div>

<script>
let questions = [
    { eq: "8x² - 14x - 15", ans: ["(4x+3)(2x-5)", "(2x-5)(4x+3)"] },
    { eq: "6x² + x - 12", ans: ["(3x-4)(2x+3)", "(2x+3)(3x-4)"] },
    { eq: "3x² - 8x - 3", ans: ["(3x+1)(x-3)", "(x-3)(3x+1)"] }
];

let currentQuestion = {};
let score = 0;
let timeLeft = 30;
let timerInterval;

function newQuestion() {
    clearInterval(timerInterval);
    currentQuestion = questions[Math.floor(Math.random() * questions.length)];
    document.getElementById("question").innerText = "題目： " + currentQuestion.eq;
    document.getElementById("answer").value = "";
    document.getElementById("result").innerHTML = "";
    timeLeft = 30;
    document.getElementById("timer").innerText = "剩餘時間：" + timeLeft + " 秒";
    timerInterval = setInterval(countdown, 1000);
}

function countdown() {
    timeLeft--;
    document.getElementById("timer").innerText = "剩餘時間：" + timeLeft + " 秒";
    if (timeLeft <= 0) {
        clearInterval(timerInterval);
        document.getElementById("result").innerHTML = "⏰ 時間到！正確答案是：" + currentQuestion.ans[0];
    }
}

function checkAnswer() {
    if (timeLeft <= 0) return; // 時間到不能作答
    let ans = document.getElementById("answer").value.replace(/\s+/g, "");
    if (currentQuestion.ans.includes(ans)) {
        document.getElementById("result").innerHTML = "✅ 恭喜，正確！";
        score++;
        clearInterval(timerInterval);
    } else {
        document.getElementById("result").innerHTML = "❌ 再試試看～";
    }
    document.getElementById("score").innerText = "得分：" + score;
}

// 初始化第一題
newQuestion();
</script>

</body>
</html>
